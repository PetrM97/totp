<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="cs">
<head>
<!-- Generated by javadoc (1.8.0_60) on Sat Apr 08 14:08:09 CEST 2017 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Overview</title>
<meta name="date" content="2017-04-08">
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="Style">
<script type="text/javascript" src="script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Overview";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li class="navBarCell1Rev">Overview</li>
<li>Package</li>
<li>Class</li>
<li><a href="overview-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-all.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev</li>
<li>Next</li>
</ul>
<ul class="navList">
<li><a href="index.html?overview-summary.html" target="_top">Frames</a></li>
<li><a href="overview-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<div class="subTitle">
<div class="block"><div class="page">
    <div id="preview-page" class="preview-page" data-autorefresh-url="">

    

      <div role="main" class="main-content">
        <div class="container new-discussion-timeline experiment-repo-nav">
          <div class="repository-content">
            <div id="readme" class="readme boxed-group clearfix announce instapaper_body md">
              
                
                  <span class="octicon octicon-book"></span>
                  Uživatelská dokumentace
                
              
              <article class="markdown-body entry-content" itemprop="text" id="grip-content">
                
<a id="user-content-Úvod" class="anchor" href="#%C3%9Avod" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Úvod

Tento maturitní projekt implementuje algoritmus pro generování jednorázových hesel (TOTP) podle standardu <a href="https://tools.ietf.org/html/rfc6238">RFC 6238</a> v programovacím jazyce Java.</div>
</div>
<p>See: <a href="#overview.description">Description</a></p>
</div>
<div class="contentContainer">
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Packages table, listing packages, and an explanation">
<caption><span>Packages</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Package</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="cz/alej/michalik/totp/client/package-summary.html">cz.alej.michalik.totp.client</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="cz/alej/michalik/totp/server/package-summary.html">cz.alej.michalik.totp.server</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="cz/alej/michalik/totp/util/package-summary.html">cz.alej.michalik.totp.util</a></td>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="contentContainer"><a name="overview.description">
<!--   -->
</a>
<div class="block"><div class="page">
    <div id="preview-page" class="preview-page" data-autorefresh-url="">

    

      <div role="main" class="main-content">
        <div class="container new-discussion-timeline experiment-repo-nav">
          <div class="repository-content">
            <div id="readme" class="readme boxed-group clearfix announce instapaper_body md">
              
                <h3>
                  <span class="octicon octicon-book"></span>
                  Uživatelská dokumentace
                </h3>
              
              <article class="markdown-body entry-content" itemprop="text" id="grip-content">
                <h1>
<a id="user-content-Úvod" class="anchor" href="#%C3%9Avod" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Úvod</h1>

<p>Tento maturitní projekt implementuje algoritmus pro generování jednorázových hesel (TOTP) podle standardu <a href="https://tools.ietf.org/html/rfc6238">RFC 6238</a> v programovacím jazyce Java. Součástí projektu je uživatelská aplikace, která na základě sdíleného hesla generuje jednorázová hesla, a server implementující REST API pro ověřování jednorázových hesel a správu účtů. Poslední součástí je ukázkový server v PHP, který využívá REST serveru pro správu uživatelů a demonstruje použití dvoufázového ověřování v praxi.</p>

<h1>
<a id="user-content-stažení" class="anchor" href="#sta%C5%BEen%C3%AD" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Stažení</h1>

<p>Aplikaci lze stáhnout na hlavní stránce v záložce <img class="emoji" title=":octocat:" alt=":octocat:" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png" height="20" width="20" align="absmiddle"><a href="https://github.com/PetrM97/totp/releases">Releases</a>. Ke spuštění programu je potřeba mít nainstalován <a href="https://www.java.com/en/download/">Java JRE</a> verze 7 a vyšší. <em>Druhou <strong>pokročilejší</strong> možností je <a href="kompilace">zkompilovat</a> zdrojové kódy a vytvořit si vlastní sestavení (build).</em> </p>

<p>Aplikaci není potřeba nijak instalovat, stačí ji pouze spustit jako běžný program.</p>

<h1>
<a id="user-content-klient" class="anchor" href="#klient" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Klient</h1>

<p><a href="https://camo.githubusercontent.com/87dbccec74a5b005c6b68a28206ad3f95e02cd65/68747470733a2f2f706574726d39372e6769746875622e636f6d2f746f74702f696d672f73637265656e2e706e67" target="_blank"><img src="https://camo.githubusercontent.com/87dbccec74a5b005c6b68a28206ad3f95e02cd65/68747470733a2f2f706574726d39372e6769746875622e636f6d2f746f74702f696d672f73637265656e2e706e67" alt="Snímek programu" data-canonical-src="https://petrm97.github.com/totp/img/screen.png" style="max-width:100%;"></a></p>

<p><em>Vzhled programu se může lišit v závislosti na použitém operačním systému.</em></p>

<h3>
<a id="user-content-přidání-nového-záznamu" class="anchor" href="#p%C5%99id%C3%A1n%C3%AD-nov%C3%A9ho-z%C3%A1znamu" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Přidání nového záznamu</h3>

<ul>
<li>Klikněte na tlačítko <code>+</code> v dolní části okna programu</li>
<li>V dialogu vyplňte název a vložte sdílené heslo. Záznam uložte stisknutím klávesy <code>Enter</code> nebo zavřením dialogu.</li>
<li>V programu by se nyní měl objevit nově vytvořený záznam</li>
</ul>

<h3>
<a id="user-content-vygenerování-jednorázového-hesla" class="anchor" href="#vygenerov%C3%A1n%C3%AD-jednor%C3%A1zov%C3%A9ho-hesla" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Vygenerování jednorázového hesla</h3>

<ul>
<li>Jednorázové heslo vygenerujete kliknutím na požadovaný záznam</li>
<li>Heslo se zkopíruje do systémové schránky</li>
<li>Pro vložení hesla stiskněte <code>Ctrl+V</code>
</li>
</ul>

<h1>
<a id="user-content-server" class="anchor" href="#server" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Server</h1>

<p>Pro spuštění serveru je potřeba otevřít soubor <code>TOTP_Server.jar</code> v příkazové řádce. 
Pokud jste v kořenové složce repozitáře, stačí zadat </p>

<pre><code>java -jar build/jar/TOTP_Server.jar
</code></pre>

<p>Server se automaticky spouští na adrese <a href="http://localhost:8080">localhost:8080</a> a využívá <a href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST rozhraní</a> pro správu záznamů.</p>

<h3>
<a id="user-content-struktura" class="anchor" href="#struktura" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Struktura</h3>

<ul>
<li>/users

<ul>
<li>GET = vypíše počet uživatelů (záznamů)</li>
<li>POST = přidá nového uživatele, data v POSTU je uživatelské jméno a server vrací sdílené heslo pro uživatele</li>
<li>DELETE = vymaže všechny záznamy</li>
</ul>
</li>
<li>/users/[username]

<ul>
<li>GET = vypíše informace o uživateli</li>
<li>POST = ověří poslané jednorázové heslo, odpovědí je správnost hesla</li>
<li>PUT = vygeneruje nové sdílené heslo, které server vrátí</li>
<li>DELETE = vymaže uživatele</li>
</ul>
</li>
</ul>

<h3>
<a id="user-content-příklady" class="anchor" href="#p%C5%99%C3%ADklady" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Příklady</h3>

<p>Jelikož tento server odpovídá na běžné HTTP požadavky, lze použít např. <a href="https://curl.haxx.se/">cURL</a> pro komunikaci.</p>

<p>Vytvoření nového uživatele 'uzivatel': </p>

<pre><code>curl localhost:8080/users --data uzivatel
</code></pre>

<p>Ověření platnosti jednorázového hesla '123456' pro uživatele 'uzivatel': </p>

<pre><code>curl localhost:8080/users/uzivatel --data 123456
</code></pre>

<p>Smazání uživatele 'uzivatel':</p>

<pre><code>curl localhost:8080/users/uzivatel -X DELETE
</code></pre>

<h1>
<a id="user-content-demo" class="anchor" href="#demo" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Demo</h1>

<p>Demonstrační aplikace využívá <a href="https://php.net/">PHP</a> a php-curl modulu pro komunikaci s REST serverem. Dodatečně je pak využívána knihovna <a href="https://clipboardjs.com/">clipboard.js</a> a <a href="https://developers.google.com/chart/infographics/docs/qr_codes">Google Chart API</a> pro vykreslení QR kódů pro <a href="https://github.com/google/google-authenticator">Google Authenticator</a>. Také doporučuji použít <a href="https://www.apache.org/">Apache</a> místo integrovaného PHP serveru.</p>

<h3>
<a id="user-content-instalace" class="anchor" href="#instalace" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Instalace</h3>

<p>Před instalací demo serveru je potřeba mít v lokálním adresáři kopii celého repozitáře (podle <a href="kompilace#sta%C5%BEen%C3%AD">této stránky</a>). Také je potřeba mít spuštěný <a href="server">REST server</a> kvůli funkčnosti ukázkové aplikace.</p>

<p>Pro spuštění serveru je potřeba mít nainstalován <a href="https://php.net/">PHP</a> a php-curl. Instalaci si můžete vyzkoušet na stránce <a href="https://termbox.io/">Termbox</a>, kde lze na 3 hodiny využít zdarma virtuální linuxový terminál s jedním veřejným HTTP portem. </p>

<p>V Ubuntu lze vše nainstalovat zadáním </p>

<pre><code>sudo apt-get install php php-curl apache2 libapache2-mod-php
</code></pre>

<p>Tím se nainstaluje nejnovější PHP, php-curl i Apache.
Ve Windows je potřeba konfigurační soubor <code>php.ini</code> (řádek 878) nastavit tak, aby PHP používalo <code>php_curl.dll</code> knihovnu.</p>

<p>Poté případně upravte <code>/etc/apache2/ports.conf</code> a <code>/etc/apache2/sites-available/000-default.conf</code> a restartujte Apache pomocí příkazu <code>apache2ctl restart</code>. Pokud používáte Termbox, jako port zadejte číslo portu uvedené v proměnné $PORT (pravděpodobně 2000) v obou konfiguračních souborech.</p>

<p>Ujistěte se také, že ve složce <code>demo</code> lze číst, vytvářet i spouštět soubory a případně upravte pomocí <code>chmod</code>.</p>

<p>Poté stačí v prohlížeči otevřít danou adresu (u Termbox uvedená dole), kde by se měl zobrazit přihlašovací dialog.</p>

<h1>
<a id="user-content-kompilace" class="anchor" href="#kompilace" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Kompilace</h1>

<p>Pro kompilaci je potřeba mít nainstalován <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java JDK</a> a <a href="https://ant.apache.org/">Apache Ant</a>. 
Při stahování balíků se automaticky spustí <a href="https://ivy.apache.org/">Apache Ivy</a>, který je případně stažen pomocí Antu. </p>

<p>V Ubuntu pro instalaci všech potřebných programů zadejte:</p>

<pre><code>sudo apt-get install default-jdk ant
</code></pre>

<p>Tím si stáhnete všechny potřebné programy.</p>

<hr>

<p>Nejdříve naklonujte repozitář do svého lokálního adresáře pomocí </p>

<pre><code>git clone https://github.com/petrm97/totp
</code></pre>

<p>nebo celý repozitář stáhněte z hlavního stránky jako <code>.zip</code> soubor.
Repozitář obsahuje submodul <a href="https://github.com/google/material-design-icons">Material Design Icons</a>, který je volitelný a je využíván klientskou aplikací.
Pro stažení submodulu použijte</p>

<pre><code>git submodule update --init
</code></pre>

<p>Pro vytvoření obou JAR souborů zadejte</p>

<pre><code>ant jar
</code></pre>

<p>Poté se ve složce <code>/build/jar</code> objeví spustitelné JAR soubory.</p>

<p>Pro vytvoření <code>.class</code> souborů stačí zadat</p>

<pre><code>ant compile
</code></pre>

<p>Pro zobrazení všech možností zadejte</p>

<pre><code>ant -p
</code></pre>

              </article>
            </div>
          </div>
        </div>
      </div>

    

  </div>
  <div>&nbsp;</div>
  </div><script>
    function showCanonicalImages() {
      var images = document.getElementsByTagName('img');
      if (!images) {
        return;
      }
      for (var index = 0; index < images.length; index++) {
        var image = images[index];
        if (image.getAttribute('data-canonical-src') && image.src !== image.getAttribute('data-canonical-src')) {
          image.src = image.getAttribute('data-canonical-src');
        }
      }
    }

    function scrollToHash() {
      if (location.hash && !document.querySelector(':target')) {
        var element = document.getElementById('user-content-' + location.hash.slice(1));
        if (element) {
           element.scrollIntoView();
        }
      }
    }

    function autorefreshContent(eventSourceUrl) {
      var initialTitle = document.title;
      var contentElement = document.getElementById('grip-content');
      var source = new EventSource(eventSourceUrl);
      var isRendering = false;

      source.onmessage = function(ev) {
        var msg = JSON.parse(ev.data);
        if (msg.updating) {
          isRendering = true;
          document.title = '(Rendering) ' + document.title;
        } else {
          isRendering = false;
          document.title = initialTitle;
          contentElement.innerHTML = msg.content;
          showCanonicalImages();
        }
      }

      source.onerror = function(e) {
        if (e.readyState === EventSource.CLOSED && isRendering) {
          isRendering = false;
          document.title = initialTitle;
        }
      }
    }

    window.onhashchange = function() {
      scrollToHash();
    }

    window.onload = function() {
      scrollToHash();
    }

    showCanonicalImages();

    var autorefreshUrl = document.getElementById('preview-page').getAttribute('data-autorefresh-url');
    if (autorefreshUrl) {
      autorefreshContent(autorefreshUrl);
    }
  </script></div>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li class="navBarCell1Rev">Overview</li>
<li>Package</li>
<li>Class</li>
<li><a href="overview-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-all.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev</li>
<li>Next</li>
</ul>
<ul class="navList">
<li><a href="index.html?overview-summary.html" target="_top">Frames</a></li>
<li><a href="overview-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
